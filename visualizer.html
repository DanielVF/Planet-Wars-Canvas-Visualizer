<title> Planet Wars Visualizer</title>

<style>
  body{ 
    background: white; 
    color: #01002B; 
    font-family: Helvetica, Arial;
    margin:40px;
  }
  a{ color: #78A8C0;}
/*  #display{ border: solid blue 1px;}*/
  #footer{ 
    margin-top:6em;
    font-size: 11px;
  }
</style>

<h1>Planet Wars - War Report</h1>

<div>
<canvas id="display" width="640" height="640" style="background:black;">
  
</canvas>
</div>

<div><a href="#" onclick="playFrames()">Play again</a></div>


<div id="footer">By <a href="http://braino.org/">Daniel Von Fange</a></div>

<script>

var config = {
  planet_font: 'bold 15px Arial,Helvetica ',
  planet_pixels: [10,13,18,21,23,29],
  display_size: 640,
  display_margin: 50,
  framerate: 5
}


window.gameFrames = []


// Setup Context
var example = document.getElementById('display');
var ctx = example.getContext('2d');
ctx.textAlign = 'center'
ctx.font = config.planet_font


// Calucated configs
config.unit_to_pixel = (config.display_size - config.display_margin - config.display_margin ) / 24 ;



function drawFrame(data){ 
  var size = 0, x = 0, y = 0, side = 0, ships = 0, disp_x = 0, disp_y = 0;
  
  if(data.length < 200){
    return 
  }
  
  
  ctx.fillStyle = "#000";
  ctx.fillRect(0,0,config.display_size,config.display_size);
  
  
  var lines = data.split('|')
  for(var i=0; i < lines.length; i++){
    var pieces = lines[i].split(' ')
    if(pieces[0]=='P'){
      x = parseFloat(pieces[1])
      y = parseFloat(pieces[2])
      size = pieces[5]
      side = pieces[3]
      ships = pieces[4]
      
      if(side == '1'){
        ctx.fillStyle = "rgb(120,168,192)"; 
      }else if (side == '2'){
        ctx.fillStyle = "rgb(192,0,0)"; 
      }else{
        ctx.fillStyle = "rgb(72,84,84)"; 
      }
      
      disp_x = x * config.unit_to_pixel + config.display_margin
      disp_y = y * config.unit_to_pixel + config.display_margin
      ctx.beginPath();
      ctx.arc(disp_x, disp_y, config.planet_pixels[size], 0, Math.PI*2, true); 
      ctx.closePath();
      ctx.fill();
      
      ctx.fillStyle = "#fff";
      ctx.fillText(ships, (disp_x), disp_y+5)
    }else if(pieces[0]=='F'){

    }
  }
  
  
}

function addFrame(data){
  window.gameFrames.push(data)
  if(window.gameFrames.length==1){
    playFrames()
  }
}

window.playTimer = null
window.nextFrame = 0;

function playFrames(){
  window.nextFrame = 0;
  window.playTimer = window.setInterval(showNextFrame , 1000/config.framerate)
  console.log('sd')
}

function showNextFrame(){
  if( window.gameFrames.length <= window.nextFrame ){
    clearInterval(window.playTimer)
    return
  }
  drawFrame(window.gameFrames[window.nextFrame])
  window.nextFrame++
}




addFrame('P 11.8039955755 11.2157212798 0 37 3|P 9.31956732508 21.8088737532 1 60 5|P 14.2884238258 0.622568806433 2 33 5|P 11.8654926942 5.2737846552 0 81 3|P 11.7424984567 17.1576579045 0 81 3|P 4.25409258443 0.0 0 22 1|P 19.3538985665 22.4314425597 0 22 1|P 14.7436138612 22.3240014889 0 83 3|P 8.86437728973 0.107441070771 0 83 3|P 19.8543468498 0.711933891201 0 84 1|P 3.75364430115 21.7195086685 0 84 1|P 8.86481414847 9.73662367883 0 12 5|P 14.7431770024 12.6948188808 0 12 5|P 0.0 10.8098889721 0 59 2|P 23.6079911509 11.6215535875 0 59 2|P 20.3967683707 15.5228613809 0 59 30|P 3.21122278016 6.90858117873 0 59 3|P 17.0287479269 6.65976901033 0 4 2|P 6.57924322402 15.7716735493 0 4 2|P 0.782927536597 19.6075053882 0 55 1|P 22.8250636143 2.82393717142 0 55 1|P 2.60103334076 13.172383428 0 58 3|P 21.0069578101 9.25905913169 0 58 3|F 2 50 2 17 7 5|F 1 50 1 17 17 15|F 2 27 2 17 7 6|go');

addFrame('P 11.8039955755 11.2157212798 0 37 3|P 9.31956732508 21.8088737532 1 70 5|P 14.2884238258 0.622568806433 2 33 5|P 11.8654926942 5.2737846552 0 81 3|P 11.7424984567 17.1576579045 0 81 3|P 4.25409258443 0.0 0 22 1|P 19.3538985665 22.4314425597 0 22 1|P 14.7436138612 22.3240014889 0 83 3|P 8.86437728973 0.107441070771 0 83 3|P 19.8543468498 0.711933891201 0 84 1|P 3.75364430115 21.7195086685 0 84 1|P 8.86481414847 9.73662367883 0 12 50|P 14.7431770024 12.6948188808 0 12 5|P 0.0 10.8098889721 0 59 2|P 23.6079911509 11.6215535875 0 59 2|P 20.3967683707 15.5228613809 0 59 3|P 3.21122278016 6.90858117873 0 59 3|P 17.0287479269 6.65976901033 0 4 2|P 6.57924322402 15.7716735493 0 4 2|P 0.782927536597 19.6075053882 0 55 1|P 22.8250636143 2.82393717142 0 55 1|P 2.60103334076 13.172383428 0 58 3|P 21.0069578101 9.25905913169 0 58 3|F 2 50 2 17 7 5|F 1 50 1 17 17 15|F 2 27 2 17 7 6|go');

addFrame('P 11.8039955755 11.2157212798 0 37 3|P 9.31956732508 21.8088737532 1 80 5|P 14.2884238258 0.622568806433 2 33 5|P 11.8654926942 5.2737846552 0 81 3|P 11.7424984567 17.1576579045 0 81 3|P 4.25409258443 0.0 0 22 1|P 19.3538985665 22.4314425597 0 22 1|P 14.7436138612 22.3240014889 0 83 3|P 8.86437728973 0.107441070771 0 83 3|P 19.8543468498 0.711933891201 0 84 1|P 3.75364430115 21.7195086685 0 84 1|P 8.86481414847 9.73662367883 0 12 56|P 14.7431770024 12.6948188808 0 12 5|P 0.0 10.8098889721 0 59 2|P 23.6079911509 11.6215535875 0 59 2|P 20.3967683707 15.5228613809 0 59 3|P 3.21122278016 6.90858117873 0 59 3|P 17.0287479269 6.65976901033 0 4 2|P 6.57924322402 15.7716735493 0 4 2|P 0.782927536597 19.6075053882 0 55 1|P 22.8250636143 2.82393717142 0 55 1|P 2.60103334076 13.172383428 0 58 3|P 21.0069578101 9.25905913169 0 58 3|F 2 50 2 17 7 5|F 1 50 1 17 17 15|F 2 27 2 17 7 6|go');

addFrame('P 11.8039955755 11.2157212798 0 37 3|P 9.31956732508 21.8088737532 1 90 5|P 14.2884238258 0.622568806433 2 33 5|P 11.8654926942 5.2737846552 0 81 3|P 11.7424984567 17.1576579045 0 81 3|P 4.25409258443 0.0 0 22 1|P 19.3538985665 22.4314425597 0 22 1|P 14.7436138612 22.3240014889 0 83 3|P 8.86437728973 0.107441070771 0 83 3|P 19.8543468498 0.711933891201 0 84 1|P 3.75364430115 21.7195086685 0 84 1|P 8.86481414847 9.73662367883 0 12 59|P 14.7431770024 12.6948188808 0 12 5|P 0.0 10.8098889721 0 59 2|P 23.6079911509 11.6215535875 0 59 2|P 20.3967683707 15.5228613809 0 59 3|P 3.21122278016 6.90858117873 0 59 3|P 17.0287479269 6.65976901033 0 4 2|P 6.57924322402 15.7716735493 0 4 2|P 0.782927536597 19.6075053882 0 55 1|P 22.8250636143 2.82393717142 0 55 1|P 2.60103334076 13.172383428 0 58 3|P 21.0069578101 9.25905913169 0 58 3|F 2 50 2 17 7 5|F 1 50 1 17 17 15|F 2 27 2 17 7 6|go');

addFrame('P 11.8039955755 11.2157212798 0 37 3|P 9.31956732508 21.8088737532 1 95 5|P 14.2884238258 0.622568806433 2 33 5|P 11.8654926942 5.2737846552 0 81 3|P 11.7424984567 17.1576579045 0 81 3|P 4.25409258443 0.0 0 22 1|P 19.3538985665 22.4314425597 0 22 1|P 14.7436138612 22.3240014889 0 83 3|P 8.86437728973 0.107441070771 0 83 3|P 19.8543468498 0.711933891201 0 84 1|P 3.75364430115 21.7195086685 0 84 1|P 8.86481414847 9.73662367883 0 12 66|P 14.7431770024 12.6948188808 0 12 5|P 0.0 10.8098889721 0 59 2|P 23.6079911509 11.6215535875 0 59 2|P 20.3967683707 15.5228613809 0 59 3|P 3.21122278016 6.90858117873 0 59 3|P 17.0287479269 6.65976901033 0 4 2|P 6.57924322402 15.7716735493 0 4 2|P 0.782927536597 19.6075053882 0 55 1|P 22.8250636143 2.82393717142 0 55 1|P 2.60103334076 13.172383428 0 58 3|P 21.0069578101 9.25905913169 0 58 3|F 2 50 2 17 7 5|F 1 50 1 17 17 15|F 2 27 2 17 7 6|go');

addFrame('P 11.8039955755 11.2157212798 0 37 3|P 9.31956732508 21.8088737532 1 100 5|P 14.2884238258 0.622568806433 2 33 5|P 11.8654926942 5.2737846552 0 81 3|P 11.7424984567 17.1576579045 0 81 3|P 4.25409258443 0.0 0 22 1|P 19.3538985665 22.4314425597 0 22 1|P 14.7436138612 22.3240014889 0 83 3|P 8.86437728973 0.107441070771 0 83 3|P 19.8543468498 0.711933891201 0 84 1|P 3.75364430115 21.7195086685 0 84 1|P 8.86481414847 9.73662367883 0 12 90|P 14.7431770024 12.6948188808 0 12 5|P 0.0 10.8098889721 0 59 2|P 23.6079911509 11.6215535875 0 59 2|P 20.3967683707 15.5228613809 0 59 3|P 3.21122278016 6.90858117873 0 59 3|P 17.0287479269 6.65976901033 0 4 2|P 6.57924322402 15.7716735493 0 4 2|P 0.782927536597 19.6075053882 0 55 1|P 22.8250636143 2.82393717142 0 55 1|P 2.60103334076 13.172383428 0 58 3|P 21.0069578101 9.25905913169 0 58 3|F 2 50 2 17 7 5|F 1 50 1 17 17 15|F 2 27 2 17 7 6|go');

</script>   